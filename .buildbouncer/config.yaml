version: 1
meta:
    template:
        id: cpp
    inputs:
        template.id: cpp
checks:
    - id: template:cpp:6bbc87a099e5
      source: template:cpp
      name: configure
      run: cmake -S . -B build
      shell: cmd
      requires: cmake
    - id: template:cpp:1e7940fe2631
      source: template:cpp
      name: build
      run: cmake --build build
      shell: cmd
      requires: cmake
    - id: template:cpp:a604181cd805
      source: template:cpp
      name: tests
      run: ctest --test-dir build
      shell: cmd
      requires: ctest
    - id: ci:ci:6bfddfb7806e
      source: ci:ci
      name: ci:ci:test-matrix.os:set-up-go
      run: go version
      shell: pwsh
      os: windows
      requires: go
    - id: ci:ci:e176ca0308f8
      source: ci:ci
      name: ci:ci:test-matrix.os:go-env
      run: go env
      shell: pwsh
      os: windows
      requires: go
    - id: ci:ci:7ff8c5bb4cd6
      source: ci:ci
      name: ci:ci:test-matrix.os:verify-gofmt
      run: |-
        set -euo pipefail
        files=$(find . -name '*.go' -type f)
        if [ -n "$files" ]; then
          bad=$(gofmt -l $files)
          if [ -n "$bad" ]; then
            echo "gofmt needed on:"
            echo "$bad"
            exit 1
          fi
        fi
      shell: bash
      os: windows
    - id: ci:ci:2513e181be1a
      source: ci:ci
      name: ci:ci:test-matrix.os:go-vet
      run: go vet ./...
      shell: pwsh
      os: windows
      requires: go
    - id: ci:ci:24a3818b78d7
      source: ci:ci
      name: ci:ci:test-matrix.os:go-test
      run: go test ./...
      shell: pwsh
      os: windows
      requires: go
insults:
    mode: snarky
    file: .buildbouncer/assets/insults/default.json
    locale: en
banter:
    enabled: true
    file: .buildbouncer/assets/banter/default.json
    locale: en
